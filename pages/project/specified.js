import Link from "next/link";
import { useState } from "react";

export default function Specified() {
  const [mixRatio, setMixRatio] = useState({
    cement: 1,
    fine: 2,
    coarse: 4,
  });
  const [moulds, setMoulds] = useState(240);
  const [percentInterval, setPercentInterval] = useState(10);
  const ratio = [0.4, 0.5, 0.6, 0.7, 0.8, 0.9];
  const sumRatio = mixRatio.cement + mixRatio.fine + mixRatio.coarse;
  const cement = (mixRatio.cement / sumRatio) * 1.54;
  const fine = (mixRatio.fine / sumRatio) * 1.54;
  const coarse = (mixRatio.coarse / sumRatio) * 1.54;
  const volume = moulds * 0.0034;
  const volumeCement = cement * volume;
  const volumeFine = fine * volume;
  const volumeCoarse = coarse * volume;
  let percentReplacement = [];
  const bagsCement = volumeCement / 0.035;
  const bagsFine = volumeFine / 0.035;
  const bagsCoarse = volumeCoarse / 0.035;

  for (let i = 1; i <= 10; i++) {
    percentReplacement.push(i * percentInterval);
  }
  let display = percentReplacement.map((element) => {
    return (
      <div key={element}>
        <h4>{element} replacement of coarse agg.</h4>
        <p>
          volume of coarse agg. = {volumeCoarse} x {(100 - element) / 100} =
          {volumeCoarse * ((100 - element) / 100)}m<sup>3</sup>
        </p>
        <p>
          volume of EPS = {volumeCoarse} x {element / 100} =
          {volumeCoarse * (element / 100)}m<sup>3</sup>
        </p>
      </div>
    );
  });

  let dis = percentReplacement.map((element) => {
    return (
      <div key={element}>
        <p>
          coarse agg after {element} replacement ={" "}
          {volumeCoarse * ((100 - element) / 100)}/0.035 ={" "}
          {(volumeCoarse * ((100 - element) / 100)) / 0.035} bags of coarse
          aggregate (gravel)
        </p>
      </div>
    );
  });

  let water = ratio.map((element) => {
    return (
      <div key={element}>
        <p>At {element} W/C ratio</p>
        <p>water = {element} x cement</p>
        <p>
          water = {element} x {volumeCement}
        </p>{" "}
        = {element * volumeCement}
        <p>Water in ltr: {(element * volumeCement) / 1000}</p>
      </div>
    );
  });
  return (
    <div className="calc-container">
      <h3>
        For {mixRatio.cement}:{mixRatio.fine}:{mixRatio.coarse} Mix Ratio
      </h3>
      <p>
        1m<sup>3</sup> of wet concrete assuming that total dry volume of
        material required = 1.54m<sup>3</sup>
      </p>

      <p>
        {mixRatio.cement} + {mixRatio.fine} + {mixRatio.coarse} = {sumRatio}
      </p>
      <p>
        cement: {mixRatio.cement}/{sumRatio} x 1.54 = {cement}m<sup>3</sup>
      </p>
      <p>
        fine agg: {mixRatio.fine}/{sumRatio} x 1.54 = {fine}m<sup>3</sup>
      </p>
      <p>
        coarse agg: {mixRatio.coarse}/{sumRatio} x 1.54 = {coarse}m<sup>3</sup>
      </p>

      <h3>
        For batch mix of {moulds} moulds/pieces of 0.0034m<sup>3</sup> cube (ie
        0.15 x 0.15 x 0.15 = 0.0034m<sup>3</sup>)
      </h3>
      <p>
        Total volume for {moulds} moulds/pieces = {moulds} x 0.0034 = {volume}m
        <sup>3</sup>
      </p>
      <p>
        Total volume of cement in the {moulds} moulds/pieces = {cement} x
        {volume} = {volumeCement}m<sup>3</sup>
      </p>
      <p>
        Total volume of fine agg in the {moulds} moulds/pieces = {fine} x
        {volume} = {volumeFine}m<sup>3</sup>
      </p>
      <p>
        Total volume of coarse agg in the {moulds} moulds/pieces = {coarse} x
        {volume}= {volumeCoarse}m<sup>3</sup>
      </p>

      <h3>
        Replacement of coarse aggregate with Expanded Polystyrene concrete for
        {moulds} moulds/pieces
      </h3>
      {display}

      <h3>
        Quantity/volume of cement, fine agg., coarse agg. for {moulds} cubes
      </h3>
      <p>
        cement: {volumeCement}/0.035 = {bagsCement} bags of cement
      </p>
      <p>
        fine agg = {volumeFine}/0.035 = {bagsFine} bags of fine aggregate (sand)
      </p>
      <p>
        coarse agg before replacement = {volumeCoarse}/0.035 = {bagsCoarse} bags
        of coarse aggregate (gravel)
      </p>
      {dis}

      {water}
    </div>
  );
}
